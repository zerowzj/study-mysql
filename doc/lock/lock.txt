#查看事务隔离级别
select @@tx_isolation;

#
set autocommit=off;
#
show variables;
show variables like 'autocommit';

#查看正在锁的事务
select * from information_schema.innodb_locks;
#查看等待锁的事务
select * from information_schema.innodb_lock_waits;

#看哪些表锁到了
show open tables where in_use > 0;
#查看进程号
show processlist;
#删除事务
kill trx_mysql_thread_id



InnoDB 给每一个事务生成一个唯一事务 ID 的方法称为生成快照，因此这种场景称为快照读。
但是对于更新数据不能使用快照读，因为更新数据时如果使用快照读会可能会覆盖其他事务的更改。
另外查询时如果加锁也会采用当前读的方式。当前读就是读这个数据最新的提交数据。
InnoDB 的多版本并发控制实现了在串行化的隔离级别下读不加锁，提高了并发性能
当前读，读取的是最新版本，并且对读取的记录加锁，阻塞其他事务同时修改相同记录，避免出现安全问题

1.快照读是基于 MVCC 和 undo log 来实现的，适用于简单 select 语句。（读取当前版本的数据）
2.当前读是基于临键锁（行锁 + 间歇锁）来实现的，适用于 insert，update，delete， select … for update， select … lock in share mode 语句，以及加锁了的 select 语句。（永远读取最新的数据）